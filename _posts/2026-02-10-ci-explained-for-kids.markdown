---
layout: post
title: "[GitHub Actions] CI를 초등학생도 이해하게 설명해보기"
date: 2026-02-10 18:10:00 +0900
categories: ai
---

코드를 만들다 보면 이런 일이 자주 생깁니다.

- 내 컴퓨터에서는 잘 된다.
- 그런데 GitHub에 올리면 갑자기 깨진다.

이 문제를 줄이기 위해 쓰는 것이 **CI(Continuous Integration)** 입니다.
쉽게 말하면 **코드가 바뀔 때마다 자동으로 검사해주는 로봇**입니다.

## CI를 왜 쓰나요?

숙제로 비유해보겠습니다.

- 집에서 문제를 다 푼 것 같았다.
- 학교에 가져가서 다시 보니 틀린 문제가 있었다.

코드도 비슷합니다.

- 내 로컬 환경(내 컴퓨터)에서는 통과
- 서버 환경(GitHub Actions가 준비한 컴퓨터)에서는 실패

CI는 이 차이를 빨리 발견해줍니다.
즉, "나중에 큰 문제"가 되기 전에 "지금 작은 문제"로 알려주는 안전장치입니다.

## CI는 언제 자동으로 실행되나요?

보통 GitHub에서는 아래 상황에서 자동 실행합니다.

- `push` 했을 때
- `pull request(PR)`를 열었을 때

이 프로젝트 기준 최소 설정은 다음과 같습니다.

- `main` 브랜치에 `push` 될 때
- `main`으로 들어가는 PR이 열리거나 업데이트될 때

## CI 로봇은 실제로 무엇을 하나요?

CI는 보통 아래 순서로 움직입니다.

1. **코드 체크아웃 (checkout)**
   GitHub 저장소에서 현재 코드를 가져옵니다.

2. **Node 버전 세팅**
   프로젝트가 기대하는 Node 버전을 맞춥니다.
   버전이 다르면 같은 코드도 동작이 달라질 수 있습니다.

3. **의존성 설치 (`npm ci`)**
   프로젝트에 필요한 패키지를 설치합니다.
   CI에서는 보통 `npm install`보다 `npm ci`를 선호합니다.

4. **테스트 실행 (`npm test`)**
   자동 테스트를 실행해서 기능이 깨졌는지 검사합니다.

5. **결과에 따라 통과/실패 처리**
   테스트가 실패하면 PR 머지를 막고,
   테스트가 통과하면 "검사 통과" 상태가 됩니다.

## `npm ci`를 쓰는 이유를 쉽게 설명하면

`npm ci`는 "잠금 목록(lockfile)에 적힌 그대로" 설치합니다.

- 누구 컴퓨터에서 돌려도 같은 버전으로 설치될 가능성이 높습니다.
- 그래서 "내 컴퓨터에서는 되는데요" 같은 차이를 줄여줍니다.

즉, CI에서는 **빠르고, 예측 가능하고, 재현 가능한 설치**가 중요합니다.

## 이 프로젝트의 최소 CI 시나리오

최소한 아래 두 줄은 꼭 돌리면 됩니다.

```bash
npm ci
npm test
```

여기에 가능하면 다음도 추가하면 좋습니다.

```bash
npm run test:integration
```

`test:integration`은 기능 여러 개가 함께 동작할 때 문제 없는지 보는 테스트라,
단위 테스트에서 놓친 문제를 잡는 데 도움이 됩니다.

## GitHub Actions에서는 어디에 적나요?

CI 규칙은 이 파일에 작성합니다.

- `.github/workflows/ci.yml`

이 파일은 로봇에게 주는 작업 지시서입니다.

- 언제 실행할지
- 어떤 환경에서 돌릴지
- 어떤 명령어를 어떤 순서로 실행할지

## 예시 흐름 (요약)

1. PR 생성
2. GitHub Actions 자동 시작
3. `npm ci` 실행
4. `npm test` 실행
5. 실패 시 머지 차단, 성공 시 통과

필요하면 6번으로 `npm run test:integration`까지 실행

## 자주 하는 질문

### Q1. 내 로컬에서 테스트 통과했는데 CI가 왜 실패하나요?

가능한 원인은 여러 가지가 있습니다.

- Node 버전 차이
- 설치된 패키지 버전 차이
- 로컬에만 있는 파일/환경 변수 의존
- 테스트 순서나 시간 의존성

CI는 "깨끗한 새 컴퓨터"에서 매번 실행되기 때문에,
숨겨진 의존성을 찾아내는 데 유리합니다.

### Q2. CI가 느리면 어떻게 하나요?

- 테스트를 빠른 것/느린 것으로 분리
- 캐시 전략 도입
- PR에서는 핵심 테스트만, main 병합 시 전체 테스트

다만 속도보다 중요한 것은 **신뢰성**입니다.
잘못된 통과가 쌓이면 CI를 믿을 수 없게 됩니다.

## 한 줄 결론

CI는
**"사람이 매번 손으로 하던 검사 과정을 서버가 자동으로, 매번, 같은 방식으로 실행하는 시스템"**입니다.

좋은 CI를 만들면 팀 전체가 같은 기준으로 코드를 검증하게 되고,
배포 전에 문제를 더 빨리 발견할 수 있습니다.
