---
layout: post
title: "[Claude Code] 모범 사례"
date: 2026-02-06 19:00:00 +0900
categories: ai
---

[첫 번째 글](/ai/2026/02/06/claude-code-for-kids.html)에서 작동 방식을, [두 번째 글](/ai/2026/02/06/claude-code-extensions.html)에서 확장 기능을, [세 번째 글](/ai/2026/02/06/claude-code-workflows.html)에서 워크플로우를 알아봤어. 이번에는 **Claude Code를 잘 쓰는 방법**을 알아볼 거야.

Claude Code는 질문하고 답을 기다리는 챗봇이 아니야. 파일을 읽고, 명령을 실행하고, 코드를 고치는 **자율적인 도우미**야. 이렇게 스스로 일하는 도우미를 잘 부리려면 요령이 필요해.

이 글에서 다루는 모범 사례들은 하나의 핵심 원리에서 출발해:

> **Claude의 작업 공간(context window)은 빠르게 채워지고, 채워질수록 성능이 떨어진다.**

Claude의 작업 공간에는 대화 내용, 읽은 파일, 명령 결과가 모두 쌓여. 디버깅 한 번이나 코드베이스 탐색만으로도 엄청나게 많은 내용이 쌓일 수 있어. 공간이 가득 차면 Claude가 이전 지시를 "잊거나" 실수를 더 할 수 있어. 그래서 **작업 공간 관리**가 가장 중요해.

---

## Claude에게 검증 방법을 알려줘

이것이 **가장 효과 높은 단 하나의 팁**이야.

Claude는 테스트를 실행하고, 스크린샷을 비교하고, 출력을 확인할 수 있을 때 훨씬 잘 일해. 명확한 성공 기준이 없으면 그럴듯해 보이지만 실제로는 작동 안 하는 코드를 만들 수 있어.

| 전략 | 안 좋은 예 | 좋은 예 |
|------|---------|--------|
| 검증 기준 제공 | "이메일 검증 함수를 만들어" | "validateEmail 함수를 만들어. user@example.com은 true, invalid는 false, user@.com은 false여야 해. 만들고 테스트도 실행해" |
| 시각적 검증 | "대시보드 좀 예쁘게 해줘" | "[스크린샷 붙여넣기] 이 디자인대로 만들어. 결과 스크린샷 찍고 원본이랑 비교해서 차이점을 수정해" |
| 근본 원인 해결 | "빌드가 실패해" | "빌드가 이 에러로 실패해: [에러 내용]. 수정하고 빌드 성공하는지 확인해. 에러를 숨기지 말고 원인을 해결해" |

수학 시험에서 "풀고 검산해"라고 하는 것처럼, Claude에게도 "만들고 확인해"라고 하면 결과가 훨씬 좋아져.

---

## 먼저 탐색하고, 계획하고, 코딩해

Claude에게 바로 코딩을 시키면 **잘못된 문제를 해결하는 코드**가 나올 수 있어. 그래서 단계를 나눠야 해.

### 1단계: 탐색 (Plan Mode)

`Shift+Tab`을 눌러 Plan Mode로 들어가. Claude는 파일을 읽기만 하고 변경하지 않아.

```
> /src/auth를 읽고 세션과 로그인을 어떻게 처리하는지 파악해줘.
```

### 2단계: 계획

Claude에게 상세한 구현 계획을 작성하게 해.

```
> Google OAuth를 추가하고 싶어. 어떤 파일을 바꿔야 해? 계획 세워줘.
```

### 3단계: 구현

Normal Mode로 돌아가서 코드를 작성해.

```
> 계획대로 OAuth를 구현해. 테스트 작성하고 실행해서 실패하면 수정해.
```

### 4단계: 커밋

```
> 설명적인 메시지로 커밋하고 PR 열어줘.
```

단, **모든 작업에 계획이 필요한 건 아니야**. 오타 수정이나 로그 한 줄 추가같이 간단한 작업은 바로 시키면 돼. 계획은 접근 방식이 불확실하거나, 여러 파일을 수정하거나, 코드에 익숙하지 않을 때 가장 유용해.

---

## 구체적으로 지시해

지시가 정확할수록 수정할 일이 줄어들어. Claude는 의도를 추측할 수 있지만 마음을 읽을 수는 없어.

| 전략 | 안 좋은 예 | 좋은 예 |
|------|---------|--------|
| 범위 지정 | "foo.py 테스트 추가해" | "사용자가 로그아웃한 경우를 다루는 foo.py 테스트를 작성해. mock은 쓰지 마" |
| 소스 지정 | "ExecutionFactory API가 왜 이상해?" | "ExecutionFactory의 git 히스토리를 보고 API가 어떻게 바뀌었는지 요약해" |
| 기존 패턴 참조 | "캘린더 위젯 추가해" | "홈 페이지 기존 위젯 패턴을 봐. HotDogWidget.php가 좋은 예시야. 같은 패턴으로 캘린더 위젯을 만들어" |
| 증상 설명 | "로그인 버그 수정해" | "세션 시간 초과 후 로그인 실패해. src/auth/의 토큰 새로고침을 확인해. 문제를 재현하는 테스트를 먼저 작성하고 수정해" |

### 풍부한 정보 제공하기

Claude에게 다양한 방법으로 정보를 줄 수 있어:

- **`@파일경로`** — 코드 위치를 설명하지 말고 파일을 직접 알려줘
- **이미지 붙여넣기** — 스크린샷을 복사해서 붙여넣거나 드래그해
- **URL 제공** — 문서나 API 참조 주소를 줘
- **데이터 파이프** — `cat error.log | claude`로 파일 내용을 직접 전달해
- **Claude가 스스로 가져오게** — Bash, MCP 도구, 파일 읽기로 정보를 직접 수집하게 해

---

## 환경 설정하기

몇 가지를 미리 설정해두면 모든 세션에서 Claude가 훨씬 효과적이야.

### 효과적인 CLAUDE.md 작성

`/init`을 실행하면 프로젝트 구조를 분석해서 CLAUDE.md 초안을 만들어줘. 거기서 시작해서 점점 개선하면 돼.

```markdown
# 코드 스타일
- ES 모듈(import/export) 사용. CommonJS(require)는 쓰지 마.
- 가능하면 import를 구조 분해(import { foo } from 'bar')

# 워크플로우
- 코드 변경 후 타입 체크 확인
- 전체 테스트 스위트보다 단일 테스트 실행 선호
```

CLAUDE.md를 잘 쓰는 핵심은 **간결하게 유지하는 것**이야. 각 줄을 보면서 "이걸 빼면 Claude가 실수할까?"를 물어봐. 아니면 삭제해.

| 포함해야 할 것 | 제외해야 할 것 |
|-------------|------------|
| Claude가 추측할 수 없는 Bash 명령 | Claude가 코드를 읽으면 알 수 있는 것 |
| 기본값과 다른 코드 스타일 규칙 | 이미 알고 있는 표준 언어 규칙 |
| 테스트 지시 및 선호하는 테스트 도구 | 상세한 API 문서 (링크만 줘) |
| 브랜치 이름, PR 규칙 같은 저장소 규칙 | 자주 변경되는 정보 |
| 흔한 함정이나 명확하지 않은 동작 | "깨끗한 코드 작성" 같은 당연한 것 |

CLAUDE.md가 너무 길면 Claude가 중요한 규칙을 놓치기 시작해. **코드처럼 관리**해: 정기적으로 정리하고, Claude 동작이 실제로 변하는지 확인해.

CLAUDE.md는 `@경로`로 다른 파일을 가져올 수 있어:

```markdown
프로젝트 개요는 @README.md, npm 명령은 @package.json 참조.

# 추가 지시
- Git 워크플로우: @docs/git-instructions.md
```

여러 위치에 둘 수 있어:

- **`~/.claude/CLAUDE.md`** — 모든 세션에 적용
- **프로젝트 루트 `./CLAUDE.md`** — git에 체크인해서 팀과 공유
- **상위 디렉토리** — 모노레포에서 자동으로 합쳐짐
- **하위 디렉토리** — 해당 폴더 작업 시 자동 로드

### 권한 설정

기본적으로 Claude는 파일 쓰기나 명령 실행 때마다 허락을 물어봐. 안전하지만 번거로울 수 있어. 두 가지 해결책이 있어:

- **권한 허용 목록** — `/permissions`로 안전한 명령을 미리 허용 (예: `npm run lint`, `git commit`)
- **샌드박싱** — `/sandbox`로 OS 수준 격리를 켜서 Claude가 정해진 범위 안에서 자유롭게 작업

### CLI 도구 활용

`gh`, `aws`, `gcloud` 같은 CLI 도구를 설치해두면 Claude가 외부 서비스와 상호작용할 수 있어. 예를 들어 `gh`가 있으면 Claude가 이슈를 만들고, PR을 열고, 댓글을 읽을 수 있어.

Claude가 모르는 CLI 도구도 배울 수 있어:

```
> 'foo-cli-tool --help'로 foo 도구를 배우고, 그걸로 A, B, C를 해결해.
```

### MCP 서버 연결

`claude mcp add`로 Notion, Figma, 데이터베이스 같은 외부 서비스를 연결해.

### Hooks 설정

**예외 없이 매번 실행되어야 하는 작업**에는 Hooks를 써. CLAUDE.md의 지시는 권고사항이지만, Hooks는 무조건 실행돼.

```
> 모든 파일 편집 후 eslint를 실행하는 hook을 만들어줘.
```

### Skills 만들기

`.claude/skills/` 폴더에 `SKILL.md` 파일을 만들어서 프로젝트에 특화된 지식을 줄 수 있어:

```markdown
---
name: api-conventions
description: REST API 설계 규칙
---
# API 규칙
- URL 경로에 kebab-case 사용
- JSON 속성에 camelCase 사용
- 목록에 항상 페이지네이션 포함
```

반복 작업을 위한 워크플로우 Skill도 만들 수 있어:

```markdown
---
name: fix-issue
description: GitHub 이슈 수정
disable-model-invocation: true
---
GitHub 이슈를 분석하고 수정하세요: $ARGUMENTS.
1. gh issue view로 이슈 세부 정보 가져오기
2. 관련 파일 검색
3. 수정 구현
4. 테스트 작성 및 실행
5. 커밋, 푸시, PR 생성
```

`/fix-issue 1234`로 실행할 수 있어.

### 사용자 정의 Subagent 만들기

`.claude/agents/`에 전문 도우미를 정의할 수 있어:

```markdown
---
name: security-reviewer
description: 보안 취약점 코드 리뷰
tools: Read, Grep, Glob, Bash
model: opus
---
당신은 선임 보안 엔지니어입니다. 다음을 검토하세요:
- 주입 취약점 (SQL, XSS, 명령 주입)
- 인증 및 권한 부여 결함
- 코드의 비밀 또는 자격 증명
```

### Plugin 설치

`/plugin`으로 마켓플레이스를 탐색해. Plugin은 설정 없이 skills, tools, 통합 기능을 추가해줘.

---

## 효과적으로 소통하기

### 코드베이스에 대해 질문하기

새로운 코드베이스에 합류했을 때, 선배 엔지니어에게 물어볼 것처럼 Claude에게 물어봐:

- 로깅은 어떻게 작동해?
- 새 API 엔드포인트를 만들려면 어떻게 해?
- foo.rs의 134번 줄에서 `async move { ... }`는 뭐야?
- 이 코드가 333번 줄에서 `bar()` 대신 `foo()`를 호출하는 이유는?

특별한 프롬프트 기법이 필요 없어. 그냥 직접 물어보면 돼.

### Claude가 인터뷰하게 하기

더 큰 기능을 만들 때는 Claude가 먼저 질문하게 해:

```
[간단한 설명]을 빌드하고 싶어. AskUserQuestion 도구로 나를 자세히 인터뷰해줘.

기술 구현, UI/UX, 엣지 케이스, 트레이드오프에 대해 물어봐. 내가 고려하지 않았을 어려운 부분을 파고들어줘.

다 다루면 SPEC.md에 완전한 사양을 작성해.
```

사양이 완료되면 **새 세션을 시작**해서 구현해. 새 세션은 구현에만 집중하는 깨끗한 작업 공간을 갖고 있어.

---

## 세션 관리

### 조기에 자주 방향 수정

Claude가 잘못된 방향으로 가는 걸 알아차리면 **즉시 수정**해:

- **`Esc`** — 작업을 중간에 멈춰. 작업 공간은 유지돼
- **`Esc + Esc`** 또는 **`/rewind`** — 이전 상태로 대화와 코드를 되돌려
- **"그거 취소해"** — Claude에게 변경 사항을 되돌리게 해
- **`/clear`** — 관련 없는 작업으로 넘어갈 때 작업 공간을 완전히 초기화

같은 문제를 **두 번 이상 수정**했다면, `/clear`하고 배운 것을 반영한 **더 구체적인 프롬프트**로 새로 시작하는 게 낫아. 수정이 쌓인 긴 세션보다 깨끗한 세션이 거의 항상 더 좋은 결과를 줘.

### 작업 공간을 적극적으로 관리해

- 작업 간에 자주 **`/clear`** 사용
- 자동 압축이 되면 Claude가 코드 패턴, 파일 상태, 주요 결정을 요약해
- **`/compact 지시사항`**으로 직접 압축할 수도 있어. 예: `/compact API 변경에 집중해`
- CLAUDE.md에 "압축할 때 수정된 파일 목록과 테스트 명령을 항상 보존해"라고 적으면 중요한 정보가 살아남아

### Subagent로 조사하기

작업 공간을 가장 효과적으로 아끼는 방법이야. Claude가 코드를 조사할 때 많은 파일을 읽으면서 공간을 소비해. Subagent는 별도 공간에서 실행되고 요약만 보고해:

```
> 인증 시스템이 토큰 새로고침을 어떻게 처리하는지 subagent로 조사해.
```

구현 후 검증에도 쓸 수 있어:

```
> 이 코드의 엣지 케이스를 subagent로 리뷰해.
```

### Checkpoint로 되돌리기

Claude가 변경을 할 때마다 자동으로 **checkpoint**가 만들어져. `Escape`를 두 번 누르거나 `/rewind`로 checkpoint 메뉴를 열 수 있어.

되돌리는 옵션 3가지:
- **대화만 복원** — 코드 변경은 유지
- **코드만 복원** — 대화는 유지
- **둘 다 복원** — 완전히 이전 상태로

부담 없이 "한 번 해봐"라고 시킬 수 있어. 안 되면 되돌리면 되니까.

### 대화 재개

```bash
claude --continue    # 가장 최근 대화 이어하기
claude --resume      # 최근 대화 목록에서 선택
```

`/rename`으로 세션에 이름을 붙여. "oauth-migration", "memory-leak-디버깅" 같이. 나중에 찾기 쉬워져.

---

## 자동화와 확장

한 Claude로 익숙해졌으면, **병렬 세션**과 **headless 모드**로 작업을 곱할 수 있어.

### Headless 모드

CI, pre-commit hook, 스크립트에서 대화 없이 실행:

```bash
# 일회성 질문
claude -p "이 프로젝트가 뭘 하는지 설명해"

# JSON 출력
claude -p "모든 API 엔드포인트 나열해" --output-format json

# 스트리밍
claude -p "이 로그 파일 분석해" --output-format stream-json
```

### 여러 Claude 세션 병렬 실행

세 가지 방법이 있어:

- **Claude Desktop** — 여러 로컬 세션을 시각적으로 관리
- **웹의 Claude Code** — 클라우드 VM에서 격리된 실행
- **Agent Teams** — 여러 세션의 자동 조정

**작성자/검토자 패턴**도 유용해:

| 세션 A (작성자) | 세션 B (검토자) |
|-------------|-------------|
| "API에 속도 제한기 구현해" | |
| | "속도 제한기 코드를 검토해. 엣지 케이스, 경쟁 조건, 기존 패턴과의 일관성을 확인해" |
| "검토 피드백을 반영해서 수정해" | |

새로운 시각의 Claude가 검토하면 편향 없이 문제를 잘 찾아.

### 파일 단위로 병렬 처리

대규모 마이그레이션은 병렬로 나눠서:

```bash
for file in $(cat files.txt); do
  claude -p "$file을 React에서 Vue로 마이그레이션해. OK 또는 FAIL을 반환해." \
    --allowedTools "Edit,Bash(git commit *)"
done
```

처음 2~3개 파일로 테스트해서 프롬프트를 다듬은 다음 전체에 실행해.

---

## 흔한 실수 피하기

| 실수 | 문제 | 해결 |
|------|------|------|
| **뒤죽박죽 세션** | 한 세션에서 관련 없는 작업을 섞으면 공간이 엉킴 | 작업 간에 `/clear` |
| **반복 수정** | 같은 문제를 계속 고치면 실패한 시도가 공간에 쌓임 | 두 번 실패 후 `/clear`하고 더 나은 프롬프트로 재시작 |
| **너무 긴 CLAUDE.md** | 중요한 규칙이 잡음에 묻혀 무시됨 | 무자비하게 정리. 불필요한 것은 삭제하거나 Hook으로 전환 |
| **검증 안 함** | 그럴듯해 보이지만 엣지 케이스를 안 처리함 | 항상 검증 수단 제공 (테스트, 스크립트, 스크린샷) |
| **무한 탐색** | 범위 없이 "조사해"라고 하면 수백 개 파일을 읽음 | 범위를 좁게 지정하거나 subagent 사용 |

---

## 감각을 키워가기

이 글의 패턴은 시작점이지 정답이 아니야.

때로는 작업 공간을 채워야 해 — 하나의 복잡한 문제에 깊이 파고들 때. 때로는 계획을 건너뛰어야 해 — 탐색적인 작업일 때. 때로는 모호한 프롬프트가 정확히 맞아 — Claude가 문제를 어떻게 해석하는지 보고 싶을 때.

**작동하는 것에 주의**를 기울여. Claude가 좋은 결과를 냈을 때 네가 한 것을 기억해: 프롬프트 구조, 준 정보, 사용한 모드. Claude가 어려움을 겪으면 왜인지 생각해봐. 공간이 너무 시끄러웠나? 프롬프트가 모호했나? 작업이 너무 컸나?

시간이 지나면 어떤 가이드도 담을 수 없는 **직감**이 생길 거야. 언제 구체적이어야 하고 언제 개방적이어야 하는지, 언제 계획하고 언제 탐색하는지, 언제 작업 공간을 비우고 언제 쌓아둘지 알게 될 거야.

---

## 정리하면

| 원칙 | 핵심 |
|------|------|
| 검증 방법 제공 | 테스트, 스크린샷, 예상 출력으로 Claude가 스스로 확인하게 |
| 탐색 → 계획 → 구현 | Plan Mode로 먼저 파악하고 계획 세운 후 코딩 |
| 구체적 지시 | 파일, 제약, 패턴을 구체적으로 알려줘 |
| 환경 설정 | CLAUDE.md, Hooks, Skills, MCP로 매 세션을 강화 |
| 작업 공간 관리 | `/clear` 자주, subagent로 탐색, checkpoint로 되돌리기 |
| 세션 관리 | 방향 수정은 빠르게, 대화는 이어서, 이름 붙이기 |
| 확장 | headless 모드, 병렬 세션, fan-out으로 작업량 곱하기 |
| 흔한 실수 피하기 | 뒤죽박죽 세션, 반복 수정, 긴 CLAUDE.md, 검증 부재 주의 |

처음부터 다 적용할 필요 없어. **검증 방법 제공**과 **`/clear` 습관**만으로도 결과가 크게 달라져. 나머지는 필요할 때 하나씩 추가하면 돼!
